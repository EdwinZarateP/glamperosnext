/* ====================== Ajuste global ======================= */
:root{
  /* Altura real del header sticky en desktop */
  --header-sticky-height: 96px;
}

/* El navegador compensa anclas/hashes con este padding */
html{
  scroll-behavior: smooth;
  scroll-padding-top: calc(var(--header-sticky-height) + 8px);
}

/* ======================================================================
   1. Contenedor y Layout
   ====================================================================== */
.post-container{
  width:80%;
  margin:2rem auto;
  padding:2rem;
  background:#fff;
  border-radius:12px;
  box-shadow:0 4px 20px rgba(0,0,0,.05);
  font-family:var(--font-be-vietnam),sans-serif;
  color:#333;
}
.post-error{color:#d9534f;text-align:center;font-size:1.1rem;margin-bottom:1.5rem;}

.post-layout{
  display:grid;
  grid-template-columns:minmax(0,1fr) 300px; /* contenido | toc */
  gap:28px;
  align-items:start;
  grid-template-areas:"content toc";
  overflow:visible; /* imprescindible para que sticky funcione */
}
.post-content{grid-area:content;}
/* NO sticky aquí por defecto: solo en ≥900px con la media query */

/* ======================================================================
   2. Título
   ====================================================================== */
.post-title{
  font-size:clamp(2rem,5vw,2.8rem);
  text-align:center;
  color:#2e2e2e;
  margin-bottom:1rem;
  position:relative;
  padding-bottom:.5rem;
  border-bottom:3px solid #fbbf24;
}
.post-title::after{
  content:"";
  display:block;
  width:60px;height:4px;background:#fbbf24;
  margin:.5rem auto 0;border-radius:2px;
}

/* ======================================================================
   3. Contenido
   ====================================================================== */
.post-content{
  font-size:clamp(1rem,2.5vw,1.125rem);
  line-height:1.8;
  margin-top:2rem;
  overflow-wrap:break-word;
}
.post-content p{margin-bottom:1.2rem;}
.post-content .has-text-align-left{text-align:left;}
.post-content .has-text-align-center{text-align:center;}
.post-content .has-text-align-right{text-align:right;}

.post-content .wp-block-heading,
.post-content h2,
.post-content h3{
  font-family:var(--font-be-vietnam),sans-serif;
  color:#2e2e2e;
  margin:2rem 0 1rem;
  font-weight:600;
}

/* evita que el header tape los H2/H3 */
.post-content h2,
.post-content h3{
  scroll-margin-top: calc(var(--header-sticky-height) + 8px);
}

.post-content h2{font-size:clamp(1.5rem,4vw,1.9rem);}
.post-content h3{font-size:clamp(1.3rem,3vw,1.6rem);margin-top:1.5rem;}

.post-content ul,
.post-content ol{margin:1rem 0 1.5rem 1.5rem;}
.post-content li{margin-bottom:.5rem;}

.post-content blockquote{
  margin:1.5rem 0;padding:1rem 1.5rem;border-left:4px solid #fbbf24;
  background:#fff9e6;color:#555;font-style:italic;
}
.post-content a{color:#0f6956;font-weight:500;}
.post-content a:hover{text-decoration:underline;}

/* ======================================================================
   4. Multimedia
   ====================================================================== */
.post-content .wp-block-image img{
  display:block;width:100%;height:400px;object-fit:cover;border-radius:10px;
  box-shadow:0 2px 12px rgba(0,0,0,.1);
}
.post-content .wp-block-gallery{
  display:grid;gap:10px;margin:1.5rem 0;width:100%;
  grid-template-columns:repeat(1,1fr);
}
.post-content .wp-block-gallery:has(> .wp-block-image:only-child){
  grid-template-columns:1fr;width:30%;max-width:200px;margin:2rem auto;gap:0;
}
.post-content .wp-block-gallery:has(> .wp-block-image:nth-child(2):nth-last-child(1)){
  grid-template-columns:repeat(2,1fr);width:60%;margin:auto;
}
.post-content .wp-block-gallery:has(> .wp-block-image:nth-child(3):nth-last-child(1)){
  grid-template-columns:repeat(3,1fr);
}
.post-content .wp-block-gallery .wp-block-image{margin:0;}
.post-content .wp-block-gallery .wp-block-image img{
  width:100%;height:450px;object-fit:cover;border-radius:10px;
}
.post-content iframe{
  width:100%;aspect-ratio:16/9;border:none;border-radius:8px;overflow:hidden;
  height: 350px;
}


/* ======================================================================
   5. Gutenberg especiales
   ====================================================================== */
.post-content .wp-block-media-text{
  display:grid;grid-template-columns:50% 1fr;gap:1.5rem;align-items:center;
}
.wp-block-media-text__media{display:flex;justify-content:center;align-items:center;border-radius:14px;}
.wp-block-media-text__media img{display:block;width:100%;max-height:450px;object-fit:contain;border-radius:14px;}
.wp-block-media-text__content{margin:0;padding:0;}

.post-content .wp-block-buttons{display:flex;justify-content:center;margin:2rem 0;}
.post-content .wp-block-button__link{
  display:flex;flex-wrap:wrap;justify-content:center;align-items:center;background:#0c5244;color:#fff;
  padding:1rem 1.2rem;text-decoration:none;border-radius:28px;border:2px solid #25d366;transition:background .3s;
}
.post-content .wp-block-button__link:hover{background:#094134;}

/* ======================================================================
   6. Link back
   ====================================================================== */
.post-back-link{
  display:inline-block;margin-top:2rem;color:#0070f3;text-decoration:none;font-weight:500;
  border-bottom:1px solid transparent;transition:border-color .2s;
}
.post-back-link:hover{border-color:#0070f3;}

/* ======================================================================
   7. WhatsApp
   ====================================================================== */
.contenedor-principal-whatsapp-button{
  position:fixed;bottom:20px;right:20px;z-index:1000;background:#25d366;border:none;border-radius:50%;
  padding:12px;cursor:pointer;box-shadow:0 4px 12px rgba(0,0,0,.3);transition:transform .2s;
}
.contenedor-principal-whatsapp-button:hover{transform:scale(1.05);}
.contenedor-principal-whatsapp-button img{width:40px;height:40px;display:block;}

.wp-block-columns{display:flex;flex-wrap:wrap;justify-content:space-around;align-items:center;}
.wp-block-column{display:flex;flex-direction:column;justify-content:center;align-items:center;}
.aligncenter{margin:0;}

.post-content .wp-block-video,
.post-content .wp-block-video video{max-width:100%;height:auto;display:block;padding:0;}
.post-content .wp-block-video video{aspect-ratio:16/9;object-fit:cover;border-radius:10px;box-shadow:0 2px 12px rgba(0,0,0,.1);}
.post-content .alignfull,
.post-content .alignwide{max-width:100%;margin-left:0;margin-right:0;}

/* ======================================================================
   8. TOC
   ====================================================================== */
.toc-mobile{display:none;border:1px solid #eee;border-radius:10px;background:#fafafa;}
.toc-mobile-toggle{
  display:flex;width:100%;align-items:center;justify-content:space-between;gap:8px;
  padding:12px 14px;font-weight:600;font-size:1rem;background:transparent;border:0;cursor:pointer;
}
.toc-caret{transition:transform .2s;}
.toc-caret.open{transform:rotate(180deg);}

.toc-box{border:1px solid #eee;border-radius:12px;background:#fff;box-shadow:0 2px 10px rgba(0,0,0,.04);overflow:hidden;}
.toc-title{padding:12px 14px;font-weight:700;border-bottom:1px solid #f1f1f1;background:#fafafa;}
.toc-list{padding:8px 12px 10px;}
.toc-list ul{list-style:none;margin:0;padding:0;}
.toc-list li + li{margin-top:8px;}
.toc-list a{
  display:block;font-size:.95rem;line-height:1.35;color:#374151;border-left:3px solid transparent;
  padding:6px 8px 6px 10px;border-radius:6px;text-decoration:underline;
}
.toc-list a:hover{background:#f8fafc;}
.toc-list a.active{color:#0f6956;border-left-color:#fbbf24;background:#fff8e6;font-weight:600;}


.wp-block-embed{
  padding: 0;
  margin: 0;
}

/* ======================================================================
   9. Sticky SOLO en desktop y grid item fallback
   ====================================================================== */
@media (min-width: 901px){
  /* Haz sticky el item de la columna del TOC (preferido) */
  .post-toc{
    position: sticky;
    top: calc(var(--header-sticky-height) + 12px);
    align-self: start;
    height: fit-content;
  }
  /* Fallback: si no usas .post-toc, aplica al bloque de desktop */
  .toc-desktop{
    position: sticky;
    top: calc(var(--header-sticky-height) + 12px);
    align-self: start;
    height: fit-content;
  }
}

/* ======================================================================
   10. Responsive (móvil)
   ====================================================================== */
@media (max-width: 900px){
  /* En móvil sumas ~70px de barra superior → compensamos */
  :root{ --header-sticky-height: 266px; } /* 96 + 70 */
  html{ scroll-padding-top: calc(var(--header-sticky-height) + 8px); }
  
  .post-content{
    margin-top: 0;
    padding: 0;
  }
  
  .post-container{ 
    width:90%;
    margin-top:70px;
    padding: 0;
    padding-top:0; }

  .post-title{ font-size:clamp(1.8rem,6vw,2.2rem); }

  /* Reordenar: TOC arriba, contenido abajo */
  .post-layout{
    grid-template-columns:1fr;
    grid-template-areas:
      "toc"
      "content";
    gap:16px;
  }

  .toc-mobile{display:block;}
  .toc-desktop{display:none;}

  .post-content .wp-block-gallery{grid-template-columns:1fr !important;}
  .wp-block-media-text__media img{max-height:300px;}
  .post-content img[class*="wp-image-"]{width:100%;}
  .post-content .wp-block-image img{
    width:100%;height:200px;object-fit:contain;border-radius:10px;box-shadow:0 2px 12px rgba(0,0,0,.1);
  }

  .post-content .wp-block-media-text{display:grid !important;grid-template-columns:1fr !important;}
  .wp-block-media-text__media{order:1;}
  .wp-block-media-text__content{order:2;margin-top:1rem;}

  .post-content .wp-block-button__link{margin:.5rem 0;font-size:.8rem;}


}

/* ===== Slider tipo Instagram para .wp-block-gallery ===== */
/* CSS — todas las clases propias con prefijo bloggallery- */

/* Contenedor del slider */
.post-content .wp-block-gallery.bloggallery-slider{
  position: relative;
  display: block;
  overflow: hidden;
  isolation: isolate;            /* nuevo stacking context */
  z-index: 0;                    /* base */
}

/* Rail scrolleable (UL) */
.post-content .wp-block-gallery.bloggallery-slider > .blocks-gallery-grid{
  display: block;
  margin: 0; padding: 0; list-style: none;
  overflow-x: auto; overflow-y: hidden;
  white-space: nowrap;
  scroll-snap-type: x mandatory;
  -webkit-overflow-scrolling: touch;
  position: relative;
  z-index: 1;                    /* debajo del overlay */
}

/* Fallback: sin UL */
.post-content .wp-block-gallery.bloggallery-slider:not(:has(> .blocks-gallery-grid)){
  overflow-x: auto; overflow-y: hidden;
  white-space: nowrap; scroll-snap-type: x mandatory;
  -webkit-overflow-scrolling: touch;
  position: relative; z-index: 1;
}

/* Slides (explicítamente debajo del overlay) */
.post-content .wp-block-gallery.bloggallery-slider > .blocks-gallery-grid > .blocks-gallery-item,
.post-content .wp-block-gallery.bloggallery-slider > .wp-block-image,
.post-content .wp-block-gallery.bloggallery-slider > figure.wp-block-image{
  display: inline-block; vertical-align: top;
  width: 100%; min-width: 100%;
  margin: 0; padding: 0;
  scroll-snap-align: center;
  position: relative;
  z-index: 1;                    /* < overlay */
}

/* Cualquier media no puede superar al overlay */
.post-content .wp-block-gallery.bloggallery-slider img,
.post-content .wp-block-gallery.bloggallery-slider video,
.post-content .wp-block-gallery.bloggallery-slider iframe{
  position: relative !important;
  z-index: 1 !important;         /* < overlay */
}

/* Imágenes */
.post-content .wp-block-gallery.bloggallery-slider img{
  width: 100%; height: 420px;
  object-fit: cover; border-radius: 12px; display: block;
}

/* Paginación */
.bloggallery-pagination{
  display:flex; align-items:center; justify-content:center; gap:10px;
  margin:.5rem 0 0; font-family:var(--font-be-vietnam, system-ui, sans-serif);
}
.bloggallery-dots{display:flex; align-items:center; gap:8px;}

.bloggallery-dot{
  appearance:none; -webkit-appearance:none; -moz-appearance:none;
  display:inline-block;
  width:8px; height:8px;
  min-width:8px; min-height:8px;
  aspect-ratio:1/1;            /* asegura proporción 1:1 */
  padding:0;                    /* quita padding por defecto */
  border:0;                     /* quita borde por defecto */
  border-radius:50%;
  background:#d7dbe0;
  flex:0 0 auto;                /* no permitir que el flex lo estire */
  line-height:0;                /* sin caja de texto */
  box-sizing:content-box;       /* que width/height sean el diámetro real */
  cursor:pointer;
}

.bloggallery-dot.bloggallery-active{ background: #0f6956; }
.bloggallery-counter{ font-size: .9rem; color: #4b5563; }
.bloggallery-dot:focus-visible{ outline: 2px solid #0f6956; outline-offset: 2px; }

/* ---------- Overlay de flechas (siempre visible y por encima) ---------- */
.bloggallery-arrows{
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: space-between;
  pointer-events: none;
  z-index: 2147483647;           /* por encima de cualquier slide */
  transform: translateZ(0);      /* nueva capa de composición */
}

/* Botones de flecha */
.bloggallery-arrow{
  pointer-events: auto;
  display: flex;
  align-items: center; justify-content: center;
  width: 38px; height: 38px; border-radius: 50%;
  border: 0; background: rgba(255,255,255,.92);
  box-shadow: 0 2px 8px rgba(0,0,0,.12);
  font-size: 28px; line-height: 1; color: #0f172a;
  transition: background .2s, transform .2s;
  user-select: none;
  visibility: visible !important;    /* nunca ocultas por CSS externo */
}
.bloggallery-arrow:hover{ background: #fff; transform: scale(1.05); }
.bloggallery-arrow-left{  margin-left: 10px; }
.bloggallery-arrow-right{ margin-right: 10px; }

/* Estado desactivado (visible) */
.bloggallery-arrow.bloggallery-is-disabled,
.bloggallery-arrow:disabled{
  opacity: .45;
  cursor: default;
  pointer-events: none;
  box-shadow: 0 1px 4px rgba(0,0,0,.08);
}

/* Desktop */
@media (min-width: 900px){
  .post-content .wp-block-gallery.bloggallery-slider img{ height: 520px; }
  .bloggallery-dots{ display:none; }
  .bloggallery-pagination{ justify-content:flex-end; }
}
